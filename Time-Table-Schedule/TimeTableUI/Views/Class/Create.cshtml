@model IEnumerable<TimeTableUI.Models.VMs.ClassVM>
<div class = "row">
    <div class = "col-md-8 col-lg-8">
        <div class = "card card-custom">
            <div class = "card-header">
                <h3 class = "card-title">
                    Assign Class
                </h3>
                <div class = "card-toolbar">
                    <div class = "example-tools justify-content-center">
                        <span class = "example-toggle" data-toggle = "tooltip" title = "View code"></span>
                        <span class = "example-copy" data-toggle = "tooltip" title = "Copy code"></span>
                    </div>
                </div>
            </div>
            <!--begin::Form-->
            <form id = "assignForm">
                <div class = "card-body">
                    <div class = "form-group mb-8">
                        <div id = "showMessage"></div>
                    </div>
                    <div class = "form-group input-group-lg">
                        <label>Lecturer <span class = "text-danger">*</span></label>
                        @*<input type = "number" class = "form-control" name = "id" placeholder = ""/>*@
                        @Html.DropDownList("id", (IEnumerable<SelectListItem>) ViewBag.lecturer, new {@class = "form-control prof",@name="professor", @id = "kt_select2_1", @style = "width:100%"})
                        
                    </div>
                   
                    <div class = "form-group input-group-lg">
                        <label>Course: <span class = "text-danger">*</span></label>
                        @Html.DropDownList("id", (IEnumerable<SelectListItem>) ViewBag.course, new {@class = "form-control course", @name = "course", @id = "kt_select2_2", @style = "width:100%"})
                    </div>

                    <div class = "form-group input-group-lg">
                        <label>Duration <mute>(in hours)</mute>: <span class = "text-danger">*</span></label>
                        <input type = "number" class = "form-control dur"  name = "duration" placeholder = "eg 1"/>
                    </div>


                    <div class="form-group input-group-lg">
                        <label class="col-form-label  col-sm-12">Groups</label>
                        <div class = " col-lg-12 col-md-12 col-sm-12">
                            @Html.DropDownList("id", (IEnumerable<SelectListItem>) ViewBag.group, new {@class = "form-control group", @name = "groups", @id = "kt_select2_3", @style = "width:100%", @multiple = "multiple"})
                            
                          
                        </div>
                       </div>

                    <div class = "form-group input-group-lg">
                        <label>Lab: <span class = "text-danger">*</span></label>
                        <select class = "form-control lab">
                            <option value="true">True</option>
                            <option value="false">False</option>
                        </select>
                    </div>
                    
                  
                    
                   
                </div>
                <div class = "card-footer">
                    <button type = "button" id = "saveRoomBtn" class = "btn btn-primary mr-2">Submit</button>
                    <button type = "reset" class = "btn btn-secondary">Cancel</button>
                </div>
            </form>
            <!--end::Form-->
        </div>
    </div>
    
    
    
   @* <div class = "col-md-6 col-lg-6">
      
    </div>*@
</div>
<script>
    $(document).ready(function() {
        $(document).on('click',
            '#saveRoomBtn',
            function() {
                var prof = $('.prof').val();
               var course= $('.course').val();
               var duration= $('.dur').val();
               var group= $('.group').val();
               var lab= $('.lab').val();

                var grp = [];


               
                $.each(group,
                    function(index, value) {
                        //console.log(value);
                        //alert(value);
                        // Will stop running after "three"
                        grp.push(value);

                    });
               
                

               var Class = {
                   "class":{
                    "professor": prof,
                    "course": course,
                    "duration": duration,
                        "group": grp,
                    "lab": lab
                    }
                }

               
              
                $.ajax({
                    url: $('#base_url').text() + '/Class/Create',
                    type: 'POST',
                    data: Class,
                    success: function(data) {
                        if (data == "Class Assigned Successfully") {
                            $('#showMessage').html(`

                            <div class="alert alert-custom alert-light-primary fade show mb-5" role="alert">
                                <div class="alert-icon"><i class="flaticon2-check-mark"></i></div>
                                <div class="alert-text">${data.message}</div>
                                <div class="alert-close">
                                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                        <span aria-hidden="true"><i class="ki ki-close"></i></span>
                                    </button>
                                </div>
                            </div>


                                                    
                        `);
                        } else {
                            $('#showMessage').html(`
                        <div class="alert alert-custom alert-light-primary fade show mb-5" role="alert">
                            <div class="alert-icon"><i class="flaticon-warning"></i></div>
                            <div class="alert-text">${data.message}</div>
                            <div class="alert-close">
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                    <span aria-hidden="true"><i class="ki ki-close"></i></span>
                                </button>
                            </div>
                        </div>
                        
                        `);
                        }
                       // $('#groupForm').reset;
                    }

                });
                
            });
        $(document).on('click',
            '.close',
            function() {
                location.reload();
            });
    })
</script>
